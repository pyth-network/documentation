import Input from '../../components/Input';
import Arg from '../../components/Arg';
import Example from '../../components/Example';
import DynamicCode from '../../components/DynamicCode';
import DisplayKeyValueStore from '../../components/DisplayKeyValueStore';
import EvmCall from '../../components/EvmCall';
import { Tab, Tabs } from 'nextra-theme-docs';

# Get Update Fee
**getUpdateFee(updateData: bytes[])**

Get the fee required to update the on-chain price feeds with the provided `updateData`.
The returned number of wei should be sent as the transaction value when calling [updatePriceFeeds](update-price-feeds).
The `updateData` can be retrieved from the price service API.

| Argument                                                  |                           | Description                                                                                               |
|-----------------------------------------------------------|---------------------------|-----------------------------------------------------------------------------------------------------------|
| <Arg required={true} type="hex[]">updateData</Arg>        | <Input id="updateData" /> | The price updates that you would like to submit to [updatePriceFeeds](update-price-feeds) |

Examples:
<Example
    keyValues={{
        updateData: (ctx) => ctx.getLatestVaa('Crypto.BTC/USD'),
    }}
>
    Latest BTC/USD update data
</Example>

<EvmCall
    functionName="getUpdateFee"
    buildArguments={(kvs) => [[kvs["updateData"]]]}
/>

## Example Code

<Tabs items={['Solidity', 'ethers.js v6']}>
    <Tab>
        <DynamicCode targets={{
            "0x0000": (ctx) => ctx.evmConfig.pythAddress,
            "0x1111": (ctx) => ctx.get("updateData", "<updateData>"),
            "// NETWORK_NAME": (ctx) => `// ${ctx.evmConfig.info.chainName}`,
        }}>
            ```solidity
            import "pyth-sdk-solidity/IPyth.sol";
            import "pyth-sdk-solidity/PythStructs.sol";

            // Sample code for
            // NETWORK_NAME
            address contractAddress = 0x0000;
            bytes[] updateData = [0x1111];
            IPyth pyth = IPyth(contractAddress);
            uint feeAmount = pyth.getUpdateFee(updateData);
            ```
        </DynamicCode>
    </Tab>

    <Tab>
        <DynamicCode targets={{
            "'0x0000'": (ctx) => `'${ctx.evmConfig.pythAddress}'`,
            "'0x1111'": (ctx) => `'${ctx.get("updateData", "<updateData>")}'`,
        }}>
            ```typescript
            const contractAddress = '0x0000';
            const pythAbi = require('./abis/IPyth.json');
            const provider = ethers.getDefaultProvider("<RPC URL>");
            const contract = new ethers.Contract(contractAddress, pythAbi, provider);

            const updateData = ['0x1111'];
            const [feeAmount] = await contract.getUpdateFee(updateData);
            ```
        </DynamicCode>
    </Tab>
</Tabs>
